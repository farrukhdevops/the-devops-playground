global:
  scrape_interval: 15s
  evaluation_interval: 15s

rule_files:
  - /etc/prometheus/alert.rules.yml

scrape_configs:
  - job_name: prometheus
    static_configs:
      - targets: ["prometheus:9090"]

  - job_name: loki
    metrics_path: /metrics
    static_configs:
      - targets: ["loki:3100"]

  - job_name: grafana
    metrics_path: /metrics
    static_configs:
      - targets: ["grafana:3000"]

  - job_name: promtail
    metrics_path: /metrics
    static_configs:
      - targets: ["promtail:9080"]

  - job_name: rabbitmq
    metrics_path: /metrics
    static_configs:
      - targets: ["rabbitmq:15692"]

  - job_name: node-exporter
    static_configs:
      - targets: ["node-exporter:9100"]

  - job_name: cadvisor
    static_configs:
      - targets: ["cadvisor:8080"]

  - job_name: storefront
    metrics_path: /metrics
    static_configs:
      - targets: ["tdp-storefront:3000"]

  - job_name: apis
    metrics_path: /metrics
    static_configs:
      - targets:
          - "catalog-api:8000"
          - "orders-api:8000"
          - "payments-api:8000"
